name: Docker Image CI

on:
  pull_request:
    types: [opened, synchronize, reopened]

jobs:

  build:

    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v1
    
    - name: Build cadc-java
      run: cd cadc-java && docker build . --file Dockerfile --tag cadc-tomcat:$(date +%s)
    
    - name: Build cadc-tomcat
      run: cd cadc-tomcat && docker build . --file Dockerfile --tag cadc-tomcat:$(date +%s)
    
    - name: Build cadc-postgresql12-dev
      run: cd cadc-postgresql-dev && docker build . --file Dockerfile.pg12 --tag cadc-postgresql12-dev:$(date +%s)
    
    - name: Build cadc-haproxy-dev
      run: cd cadc-haproxy-dev && docker build . --file Dockerfile --tag cadc-haproxy-dev:$(date +%s)
